## Description: Checks if buffer contains only newline before discarding it
## Origin/Author: Torsten Spindler (Canonical)
## Bug: http://pad.lv/298217
--- a/libgksu/libgksu.c
+++ b/libgksu/libgksu.c
@@ -2980,16 +2980,22 @@
 	  /* ignore the first newline that comes right after sudo receives
 	     the password */
 	  fgets (buffer, 255, fdfile);
-	  /* this is the status we are interested in */
-	  fgets (buffer, 255, fdfile);
+          if (!strcmp (buffer, "\n")) 
+            {
+	      /* this is the status we are interested in */
+	      fgets (buffer, 255, fdfile);
+            }
 #else
           fcntl(parent_pipe[0], F_SETFL, fcntl(parent_pipe[0], F_GETFL) & ~O_NONBLOCK);
 
 	  /* ignore the first newline that comes right after sudo receives
 	     the password */
 	  fgets (buffer, 255, infile);
-	  /* this is the status we are interested in */
-	  fgets (buffer, 255, infile);
+          if (!strcmp (buffer, "\n")) 
+            {
+	      /* this is the status we are interested in */
+	      fgets (buffer, 255, infile);
+            }
 #endif
 	}
       else
